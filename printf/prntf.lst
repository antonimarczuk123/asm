     1                                  extern printf
     2                                  
     3                                  %macro prntf 2
     4                                      section .data
     5                                      %%msg   db  %1, 0
     6                                      %%fmt   db  "%s %ld",10,0
     7                                      
     8                                      section .text
     9                                      mov     rdi,    %%fmt
    10                                      mov     rsi,    %%msg
    11                                      mov     rdx,    [%2]
    12                                      mov     rax,    0
    13                                      call    printf
    14                                  %endmacro
    15                                  
    16                                  section .data
    17 00000000 0F00000000000000        number  dq  15
    18                                  
    19                                  section .bss
    20                                  
    21                                  section .text
    22                                  global main
    23                                  main:
    24 00000000 55                          push    rbp
    25 00000001 4889E5                      mov     rbp,    rsp
    26                                  
    27                                      prntf   "Hello World!", number
     4                              <1>  section .data
     5 00000008 48656C6C6F20576F72- <1>  %%msg db %1, 0
     5 00000011 6C642100            <1>
     6 00000015 257320256C640A00    <1>  %%fmt db "%s %ld",10,0
     7                              <1> 
     8                              <1>  section .text
     9 00000004 48BF-               <1>  mov rdi, %%fmt
     9 00000006 [1500000000000000]  <1>
    10 0000000E 48BE-               <1>  mov rsi, %%msg
    10 00000010 [0800000000000000]  <1>
    11 00000018 488B1425[00000000]  <1>  mov rdx, [%2]
    12 00000020 B800000000          <1>  mov rax, 0
    13 00000025 E8(00000000)        <1>  call printf
    28                                  
    29 0000002A 4831C0                      xor     rax,    rax
    30 0000002D 4889EC                      mov     rsp,    rbp
    31 00000030 5D                          pop     rbp
    32 00000031 C3                          ret
    33                                      
    34                                      
    35                                      
    36                                      
    37                                      
